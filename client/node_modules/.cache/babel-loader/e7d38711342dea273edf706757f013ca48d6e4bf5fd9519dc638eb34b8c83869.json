{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ethan\\\\OneDrive\\\\Desktop\\\\spotify-stats-express\\\\client\\\\src\\\\components\\\\Data.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useDataContext } from '../DataContext';\n\n/* This function will serve as a higher-order component (HOC) that will wrap any page that requires the gathering of data\r\n\r\nIt basically saves the page.js files from clutter so that the focus for those files can be UI only\r\n*/\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DataWrapper = ({\n  children\n}) => {\n  _s();\n  const {\n    trackData,\n    setArtistsData,\n    setTrackData,\n    setGenreData,\n    setAlbumData,\n    setUserData,\n    term,\n    setSongPopularity\n  } = useDataContext();\n  useEffect(() => {\n    console.log(\"rerun?\");\n    console.log(term);\n    console.log(\"--------\");\n    if (localStorage.getItem(\"access_token\")) {\n      hasAccessToken();\n    } else {\n      noAccessToken();\n    }\n  }, [term]);\n  function hasAccessToken() {\n    const access_token = localStorage.getItem(\"access_token\");\n    console.log(\"hasAccesstoken\");\n    gatherData(access_token);\n  }\n  function noAccessToken() {\n    const params = new URLSearchParams(window.location.search);\n    localStorage.setItem('access_token', params.get('access_token'));\n    localStorage.setItem('refresh_token', params.get('refresh_token'));\n    gatherData(localStorage.getItem('access_token'));\n  }\n  function setData(data) {\n    setTrackData(data.songs);\n    setArtistsData(data.artists);\n    setGenreData(data.genres);\n    setAlbumData(data.albums);\n    setUserData(data.user);\n    setSongPopularity(data.song_popularity);\n  }\n  function setAdditionalData() {\n    const popular = document.querySelector(\".popular\");\n    const average = document.querySelector(\".average\");\n    const obscure = document.querySelector(\".obscure\");\n    const parent = document.querySelector(\".parent-bar\");\n    if (parent) {\n      const elementWidth = parent.clientWidth;\n      const pValue = elementWidth * (data.song_popularity.Popular * 2 / 100);\n      const aValue = elementWidth * (data.song_popularity.Average * 2 / 100);\n      const oValue = elementWidth * (data.song_popularity.Obscure * 2 / 100);\n      popular.style.width = pValue + \"px\";\n      average.style.width = aValue + \"px\";\n      obscure.style.width = oValue + \"px\";\n    }\n  }\n  function gatherData(access_token) {\n    fetch(`http://localhost:5000/user-data?access_token=${access_token}&term=${term}`).then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    }).then(data => {\n      setData(data);\n      setAdditionalData();\n      console.log(\"updating data\");\n      const spinner = document.querySelector(\".lds-ring\");\n      const outlinedContainer = document.querySelector(\".outlined-stats-container\");\n      spinner.classList.add(\"display-none\");\n      outlinedContainer.classList.remove(\"add-blur\");\n    }).catch(error => {\n      console.error('Fetch error:', error);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n_s(DataWrapper, \"4jz9IuNOVNVKGsDsfLhrviw3WCE=\", false, function () {\n  return [useDataContext];\n});\n_c = DataWrapper;\nexport default DataWrapper;\nvar _c;\n$RefreshReg$(_c, \"DataWrapper\");","map":{"version":3,"names":["useEffect","useDataContext","jsxDEV","_jsxDEV","DataWrapper","children","_s","trackData","setArtistsData","setTrackData","setGenreData","setAlbumData","setUserData","term","setSongPopularity","console","log","localStorage","getItem","hasAccessToken","noAccessToken","access_token","gatherData","params","URLSearchParams","window","location","search","setItem","get","setData","data","songs","artists","genres","albums","user","song_popularity","setAdditionalData","popular","document","querySelector","average","obscure","parent","elementWidth","clientWidth","pValue","Popular","aValue","Average","oValue","Obscure","style","width","fetch","then","response","ok","Error","json","spinner","outlinedContainer","classList","add","remove","catch","error","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ethan/OneDrive/Desktop/spotify-stats-express/client/src/components/Data.js"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useDataContext } from '../DataContext';\r\n\r\n\r\n/* This function will serve as a higher-order component (HOC) that will wrap any page that requires the gathering of data\r\n\r\nIt basically saves the page.js files from clutter so that the focus for those files can be UI only\r\n*/ \r\nconst DataWrapper = ({ children }) => {\r\n  const { trackData, setArtistsData, setTrackData, setGenreData, setAlbumData, setUserData, term, setSongPopularity } = useDataContext();\r\n\r\n  useEffect(() => {\r\n    console.log(\"rerun?\")\r\n    console.log(term)\r\n    console.log(\"--------\")\r\n    if (localStorage.getItem(\"access_token\")) {\r\n      hasAccessToken();\r\n    }\r\n    else {\r\n      noAccessToken();\r\n    }\r\n  }, [term]);\r\n\r\n  function hasAccessToken() {\r\n    const access_token = localStorage.getItem(\"access_token\")\r\n    console.log(\"hasAccesstoken\")\r\n    gatherData(access_token)\r\n  }\r\n  \r\n  function noAccessToken() {\r\n    const params = new URLSearchParams(window.location.search);\r\n    localStorage.setItem('access_token', params.get('access_token'));\r\n    localStorage.setItem('refresh_token', params.get('refresh_token'))\r\n\r\n    gatherData(localStorage.getItem('access_token'))\r\n  }\r\n  function setData(data) {\r\n    setTrackData(data.songs) \r\n    setArtistsData(data.artists) \r\n    setGenreData(data.genres) \r\n    setAlbumData(data.albums)\r\n    setUserData(data.user)\r\n    setSongPopularity(data.song_popularity)\r\n  }\r\n  function setAdditionalData() {\r\n    const popular = document.querySelector(\".popular\");\r\n    const average = document.querySelector(\".average\");\r\n    const obscure = document.querySelector(\".obscure\");\r\n    const parent = document.querySelector(\".parent-bar\")\r\n\r\n\r\n    if (parent) {\r\n      const elementWidth = parent.clientWidth;\r\n\r\n      const pValue = elementWidth * ((data.song_popularity.Popular * 2) / 100)\r\n      const aValue = elementWidth * ((data.song_popularity.Average * 2) / 100)\r\n      const oValue = elementWidth * ((data.song_popularity.Obscure * 2)/ 100)\r\n\r\n      popular.style.width = pValue+\"px\";\r\n      average.style.width = aValue+\"px\";\r\n      obscure.style.width = oValue+\"px\";\r\n    }\r\n  }\r\n\r\n  function gatherData(access_token) {\r\n    fetch(`http://localhost:5000/user-data?access_token=${access_token}&term=${term}`)\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n      return response.json();\r\n    })\r\n    .then(data => {\r\n      setData(data)\r\n      setAdditionalData()\r\n      console.log(\"updating data\")\r\n\r\n      const spinner = document.querySelector(\".lds-ring\");\r\n      const outlinedContainer = document.querySelector(\".outlined-stats-container\");\r\n      spinner.classList.add(\"display-none\");\r\n      outlinedContainer.classList.remove(\"add-blur\");\r\n    })\r\n    .catch(error => {\r\n      console.error('Fetch error:', error);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      { children }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DataWrapper;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}