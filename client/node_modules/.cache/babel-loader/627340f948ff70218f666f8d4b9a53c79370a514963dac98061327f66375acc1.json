{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ethan\\\\OneDrive\\\\Desktop\\\\spotify-stats-express\\\\client\\\\src\\\\components\\\\Data.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useCallback, useState } from 'react';\nimport { useDataContext } from '../DataContext';\n\n/* This function will serve as a higher-order component (HOC) that will wrap any page that requires the gathering of data\r\n\r\nit basically saves the page.js files from clutter so that the focus for those files can be UI only\r\n*/\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DataWrapper = ({\n  children\n}) => {\n  _s();\n  const {\n    setArtistsData,\n    setTrackData,\n    setGenreData\n  } = useDataContext();\n  useEffect(() => {\n    if (localStorage.getItem(\"access_token\")) {\n      hasAccessToken();\n    } else {\n      noAccessToken();\n    }\n  }, []);\n  function hasAccessToken() {\n    console.log(\"has access token in data.js\");\n    const access_token = localStorage.getItem(\"access_token\");\n    const refresh_token = localStorage.getItem(\"refresh_token\");\n    topArtists(access_token, 10);\n    topTracks(access_token, 10);\n  }\n  function noAccessToken() {\n    const queryString = window.location.search; // Gets the query string (?param1=value1&param2=value2)\n    const params = new URLSearchParams(queryString);\n    const access_token = params.get('access_token');\n    const refresh_token = params.get('refresh_token');\n    localStorage.setItem('access_token', access_token);\n    localStorage.setItem('refresh_token', refresh_token);\n    const test = localStorage.getItem(\"access_token\");\n    console.log(\"(In data.js) test: \" + test);\n    topArtists(access_token, 10);\n    topTracks(access_token, 10);\n  }\n  function topArtists(access_token, limit) {\n    fetch(`http://localhost:5000/top-artists?access_token=${access_token}&limit=${limit}`).then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    }).then(data => {\n      console.log(data);\n      setArtistsData(data);\n    }).catch(error => {\n      console.error('Fetch error:', error);\n    });\n  }\n  function topTracks(access_token, limit) {\n    fetch(`http://localhost:5000/top-tracks?access_token=${access_token}&limit=${limit}`).then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    }).then(data => {\n      console.log(data);\n      setTrackData(data);\n    }).catch(error => {\n      console.error('Fetch error:', error);\n    });\n  }\n  function genreTest(access_token, limit) {\n    fetch(`http://localhost:5000/daily-db-update?access_token=${access_token}&limit=${limit}`).then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    }).then(data => {\n      console.log(data);\n      setTrackData(data);\n    }).catch(error => {\n      console.error('Fetch error:', error);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n};\n_s(DataWrapper, \"K/YrBcNB3A9AI1BPniIuut46dlY=\", false, function () {\n  return [useDataContext];\n});\n_c = DataWrapper;\nexport default DataWrapper;\nvar _c;\n$RefreshReg$(_c, \"DataWrapper\");","map":{"version":3,"names":["useEffect","useCallback","useState","useDataContext","jsxDEV","_jsxDEV","DataWrapper","children","_s","setArtistsData","setTrackData","setGenreData","localStorage","getItem","hasAccessToken","noAccessToken","console","log","access_token","refresh_token","topArtists","topTracks","queryString","window","location","search","params","URLSearchParams","get","setItem","test","limit","fetch","then","response","ok","Error","json","data","catch","error","genreTest","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ethan/OneDrive/Desktop/spotify-stats-express/client/src/components/Data.js"],"sourcesContent":["import { useEffect, useCallback, useState } from 'react';\r\nimport { useDataContext } from '../DataContext';\r\n\r\n\r\n/* This function will serve as a higher-order component (HOC) that will wrap any page that requires the gathering of data\r\n\r\nit basically saves the page.js files from clutter so that the focus for those files can be UI only\r\n*/ \r\nconst DataWrapper = ({ children }) => {\r\n  const { setArtistsData, setTrackData, setGenreData } = useDataContext();\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"access_token\")) {\r\n      hasAccessToken();\r\n    }\r\n    else {\r\n      noAccessToken();\r\n    }\r\n  }, []);\r\n\r\n\r\n  function hasAccessToken() {\r\n    console.log(\"has access token in data.js\")\r\n    const access_token = localStorage.getItem(\"access_token\")\r\n    const refresh_token = localStorage.getItem(\"refresh_token\")\r\n\r\n    topArtists(access_token, 10)\r\n    topTracks(access_token, 10)\r\n  }\r\n  \r\n  function noAccessToken() {\r\n    const queryString = window.location.search; // Gets the query string (?param1=value1&param2=value2)\r\n    const params = new URLSearchParams(queryString);\r\n    const access_token = params.get('access_token');\r\n    const refresh_token = params.get('refresh_token');\r\n    localStorage.setItem('access_token', access_token);\r\n    localStorage.setItem('refresh_token', refresh_token)\r\n    const test = localStorage.getItem(\"access_token\")\r\n    console.log(\"(In data.js) test: \" + test)\r\n\r\n    topArtists(access_token, 10);\r\n    topTracks(access_token, 10); \r\n  }\r\n\r\n  function topArtists(access_token, limit) {\r\n    fetch(`http://localhost:5000/top-artists?access_token=${access_token}&limit=${limit}`)\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n      return response.json();\r\n    })\r\n    .then(data => {\r\n      console.log(data);      \r\n      setArtistsData(data)\r\n    })\r\n    .catch(error => {\r\n      console.error('Fetch error:', error);\r\n    });\r\n  }\r\n\r\n  function topTracks(access_token, limit) {\r\n    fetch(`http://localhost:5000/top-tracks?access_token=${access_token}&limit=${limit}`)\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n      return response.json();\r\n    })\r\n    .then(data => {\r\n      console.log(data)     \r\n      setTrackData(data)   \r\n    })\r\n    .catch(error => {\r\n      console.error('Fetch error:', error);\r\n    });\r\n  }\r\n\r\n  function genreTest(access_token, limit) {\r\n    fetch(`http://localhost:5000/daily-db-update?access_token=${access_token}&limit=${limit}`)\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n      return response.json();\r\n    })\r\n    .then(data => {\r\n      console.log(data)     \r\n      setTrackData(data)   \r\n    })\r\n    .catch(error => {\r\n      console.error('Fetch error:', error);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      { children }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DataWrapper;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}